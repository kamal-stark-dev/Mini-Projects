const digit = document.querySelector(".digit");
const clock = digit.querySelector(".clock");

const angles = {
  tr: [0, 270],
  rd: [0, 90],
  dl: [90, 180],
  lt: [180, 270],
  "|": [90, 270],
  "--": [0, 180],
  " ": [135, 135], // inactive
};

const digitMap = {
  0: [
    "rd",
    "--",
    "--",
    "dl",
    "|",
    "rd",
    "dl",
    "|",
    "|",
    "|",
    "|",
    "|",
    "|",
    "|",
    "|",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],

  1: [
    "rd",
    "--",
    "dl",
    "",
    "tr",
    "dl",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "rd",
    "lt",
    "tr",
    "dl",
    "tr",
    "--",
    "--",
    "lt",
  ],

  2: [
    "rd",
    "--",
    "--",
    "dl",
    "tr",
    "--",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "dl",
    "tr",
    "--",
    "--",
    "lt",
  ],

  3: [
    "rd",
    "--",
    "--",
    "dl",
    "tr",
    "--",
    "dl",
    "|",
    "",
    "rd",
    "lt",
    "|",
    "",
    "tr",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],

  4: [
    "rd",
    "dl",
    "rd",
    "dl",
    "|",
    "|",
    "|",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "tr",
    "--",
    "dl",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "",
    "tr",
    "lt",
  ],

  5: [
    "rd",
    "--",
    "--",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "dl",
    "tr",
    "--",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],

  6: [
    "rd",
    "--",
    "--",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "dl",
    "|",
    "rd",
    "dl",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],

  7: [
    "rd",
    "--",
    "--",
    "dl",
    "tr",
    "--",
    "dl",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "",
    "|",
    "|",
    "",
    "",
    "tr",
    "lt",
  ],

  8: [
    "rd",
    "--",
    "--",
    "dl",
    "|",
    "rd",
    "dl",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "|",
    "rd",
    "dl",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],

  9: [
    "rd",
    "--",
    "--",
    "dl",
    "|",
    "rd",
    "dl",
    "|",
    "|",
    "tr",
    "lt",
    "|",
    "tr",
    "--",
    "dl",
    "|",
    "rd",
    "--",
    "lt",
    "|",
    "tr",
    "--",
    "--",
    "lt",
  ],
};

function createDigit() {
  for (let i = 0; i < 23; i++) {
    const clone = clock.cloneNode(true); // true -> deep clone (include hands)
    digit.appendChild(clone);
  }
}

function updateDigit(digit, num) {
  const clocks = digit.querySelectorAll(".clock");
  const map = digitMap[num];

  clocks.forEach((clock, i) => {
    const symbol = map[i] || " ";
    const [angle1, angle2] = angles[symbol];

    const [hand1, hand2] = clock.querySelectorAll(".hand");
    hand1.style.rotate = `${angle1}deg`;
    hand2.style.rotate = `${angle2}deg`;
  });
}

createDigit();
updateDigit(digit, "9");
